<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifeLink | Centralized Organ Coordination</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Poppins', sans-serif; background-color: #fdfdfd; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 10px; }
        .animate-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .hero-bg {
            background: linear-gradient(rgba(0,111,183,0.5), rgba(0,162,158,0.5)), 
                        url('https://images.unsplash.com/photo-1584362923647-481cf614a242?q=80&w=2000');
            background-size: cover;
            background-position: center;
        }
    </style>
</head>
<body class="bg-white text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        // Icon Component to bridge React and Lucide CDN
        const Icon = ({ name, size = 20, className = "" }) => {
            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            }, [name]);
            return <i data-lucide={name} style={{ width: size, height: size }} className={className}></i>;
        };

        const App = () => {
            const [currentView, setCurrentView] = useState('home');
            const [showChat, setShowChat] = useState(false);
            const [chatInput, setChatInput] = useState('');
            const [activeToast, setActiveToast] = useState(null);
            
            const [chatMessages, setChatMessages] = useState([
                { role: 'ai', text: 'Hello! I am your LifeLink Assistant. I can help with MELD scores, genetic matching, or explain our clinical urgency scoring. How can I assist you?' }
            ]);

            const [recipient, setRecipient] = useState({
                name: '', age: '', bloodType: 'O', meldScore: 6, organNeeded: 'Kidney'
            });

            const handleChatSend = () => {
                if (!chatInput.trim()) return;
                const userMsg = { role: 'user', text: chatInput };
                setChatMessages(prev => [...prev, userMsg]);
                const input = chatInput.toLowerCase();
                setChatInput('');
                
                setTimeout(() => {
                    let reply = "I'm analyzing your request. Would you like to know more about our HLA matching or the transplant timeline?";
                    if (input.includes('meld')) reply = "MELD (Model for End-Stage Liver Disease) scores indicate medical urgency. Higher scores (up to 40) receive priority.";
                    if (input.includes('match')) reply = "Our BioMatch Engine calculates ABO compatibility and HLA genetic markers to ensure 80%+ graft survival probability.";
                    setChatMessages(prev => [...prev, { role: 'ai', text: reply }]);
                }, 600);
            };

            return (
                <div className="min-h-screen">
                    {/* 1. TOP UTILITY NAV */}
                    <div className="bg-[#00A29E] py-2 px-10 flex justify-end items-center gap-6">
                        <div className="flex gap-6 text-white text-[10px] font-bold uppercase tracking-widest">
                            <a href="#">Donate</a>
                            <a href="#">WTG 2025</a>
                        </div>
                        <div className="flex gap-4 text-white opacity-80">
                            <Icon name="instagram" size={14} />
                            <Icon name="facebook" size={14} />
                        </div>
                    </div>

                    {/* 2. MAIN HEADER */}
                    <header className="bg-[#2CA4CE] shadow-md sticky top-0 z-50">
                        <div className="max-w-7xl mx-auto px-10 h-24 flex items-center justify-between">
                            <div className="flex items-center cursor-pointer" onClick={() => setCurrentView('home')}>
                                <img src="https://www.organindia.org/wp-content/uploads/2022/06/logo-white.png" className="h-16" alt="Logo" />
                            </div>
                            <nav className="hidden lg:flex items-center gap-10">
                                <button onClick={() => setCurrentView('home')} className={`text-[12px] font-bold uppercase ${currentView === 'home' ? 'text-white border-b-2' : 'text-white opacity-70'}`}>Awareness</button>
                                
                                {/* Link to separate pledge page */}
                                <a href="pledge.html" className="text-[12px] font-bold uppercase text-white opacity-70 hover:opacity-100">Pledge</a>
                                
                                <button onClick={() => setCurrentView('recipient-apply')} className={`text-[12px] font-bold uppercase ${currentView === 'recipient-apply' ? 'text-white border-b-2' : 'text-white opacity-70'}`}>Recipient Info</button>
                                
                                {/* Link to external Streamlit app */}
                                <a href="https://edabffvkr9ephcwrf3xrgm.streamlit.app/" target="_blank" className="text-[12px] font-bold uppercase text-white opacity-70 hover:opacity-100">Hospital Portal</a>
                            </nav>
                            <button className="bg-white text-[#00A29E] px-6 py-2 rounded-full text-xs font-black uppercase shadow-lg">Login</button>
                        </div>
                    </header>

                    {/* 3. VIEW ROUTER */}
                    <main>
                        {currentView === 'home' && (
                            <div className="animate-in">
                                <section className="hero-bg h-[600px] flex items-center px-10">
                                    <div className="max-w-4xl text-white">
                                        <h1 className="text-7xl font-black leading-tight mb-8 uppercase">One Donor Can Help <br/> Save 8 Lives</h1>
                                        <div className="flex gap-6">
                                            <a href="pledge.html" class="bg-white text-[#00A29E] px-12 py-5 rounded-2xl font-black text-lg shadow-2xl transition hover:scale-105">Pledge Now</a>
                                            <button onClick={() => setCurrentView('recipient-apply')} className="bg-[#006FB7] text-white px-12 py-5 rounded-2xl font-black text-lg shadow-2xl transition hover:scale-105">I Need An Organ</button>
                                        </div>
                                    </div>
                                </section>
                                <section className="max-w-7xl mx-auto px-10 py-24 grid md:grid-cols-2 gap-20 items-center">
                                    <img src="https://www.organindia.org/wp-content/uploads/2022/07/organ-support.jpg" className="rounded-[40px] shadow-2xl" />
                                    <div>
                                        <h2 className="text-[#006FB7] text-4xl font-black mb-6 uppercase">A Global Support System</h2>
                                        <p class="text-gray-500 text-lg leading-relaxed italic">Helping people live the miracle of a life renewed through transparent and AI-optimized clinical coordination.</p>
                                    </div>
                                </section>
                            </div>
                        )}

                        {currentView === 'recipient-apply' && (
                            <div className="max-w-4xl mx-auto py-20 px-10 animate-in">
                                <h2 className="text-4xl font-black text-[#006FB7] mb-10 uppercase tracking-tighter">Recipient Application</h2>
                                <div className="space-y-8 bg-white p-10 rounded-[40px] shadow-sm border">
                                    <div className="grid grid-cols-2 gap-6">
                                        <div><label className="text-[10px] font-black uppercase text-gray-400">Patient Name</label>
                                        <input type="text" className="w-full border-b-2 border-slate-100 p-2 outline-none focus:border-[#00A29E]" placeholder="Enter Name" onChange={(e) => setRecipient({...recipient, name: e.target.value})} /></div>
                                        <div><label className="text-[10px] font-black uppercase text-gray-400">MELD Score</label>
                                        <input type="number" className="w-full border-b-2 border-slate-100 p-2 outline-none focus:border-[#00A29E]" placeholder="6-40" onChange={(e) => setRecipient({...recipient, meldScore: parseInt(e.target.value)})} /></div>
                                    </div>
                                    <button onClick={() => { setActiveToast({text: "Application Logged Locally"}); setTimeout(() => setActiveToast(null), 3000); }} className="w-full bg-[#00A29E] text-white py-5 rounded-2xl font-black text-xl shadow-xl">SUBMIT TO REGISTRY</button>
                                </div>
                            </div>
                        )}
                    </main>

                    {/* 4. CHATBOT INTEGRATION */}
                    <div className="fixed bottom-10 right-10 z-[100]">
                        {showChat && (
                            <div className="absolute bottom-24 right-0 w-96 bg-white rounded-[32px] shadow-2xl border flex flex-col animate-in">
                                <div className="bg-[#2CA4CE] p-6 text-white flex justify-between items-center">
                                    <div className="flex items-center gap-3">
                                        <Icon name="message-square" />
                                        <span className="font-bold text-xs uppercase">LifeLink AI Assistant</span>
                                    </div>
                                    <button onClick={() => setShowChat(false)}><Icon name="x" /></button>
                                </div>
                                <div className="h-80 p-6 overflow-y-auto bg-slate-50 space-y-4 custom-scrollbar">
                                    {chatMessages.map((msg, i) => (
                                        <div key={i} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                                            <div className={`p-3 rounded-2xl text-xs max-w-[85%] ${msg.role === 'user' ? 'bg-[#006FB7] text-white' : 'bg-white text-slate-600 shadow-sm'}`}>
                                                {msg.text}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                                <div className="p-4 bg-white border-t flex gap-2">
                                    <input type="text" className="flex-1 bg-slate-100 rounded-xl p-3 text-xs outline-none" placeholder="Ask about HLA or MELD..." value={chatInput} onChange={(e) => setChatInput(e.target.value)} onKeyPress={(e) => e.key === 'Enter' && handleChatSend()} />
                                    <button onClick={handleChatSend} className="bg-[#00A29E] text-white p-3 rounded-xl shadow-lg"><Icon name="send" /></button>
                                </div>
                            </div>
                        )}
                        <button onClick={() => setShowChat(!showChat)} className="w-20 h-20 bg-[#006FB7] text-white rounded-3xl flex items-center justify-center shadow-2xl transform transition hover:scale-105">
                            <Icon name="message-square" size={30} />
                        </button>
                    </div>

                    {/* 5. TOAST NOTIFICATION */}
                    {activeToast && (
                        <div className="fixed top-28 right-10 z-[200] bg-slate-900 text-white px-8 py-4 rounded-2xl shadow-2xl border-l-4 border-teal-400 animate-in">
                            <p className="text-xs font-bold uppercase tracking-widest">{activeToast.text}</p>
                        </div>
                    )}

                    <footer className="bg-slate-900 text-white py-12 text-center mt-20">
                        <p className="text-xs font-bold uppercase tracking-[0.3em] opacity-40">Copyright Â© 2026 LifeLink India | National Organ Coordination</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
